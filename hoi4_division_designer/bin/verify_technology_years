#!/usr/bin/env ruby

require_relative "../lib/division_designer"
require "set"

class VerifyTechnologyYears
  def initialize
    @db = Database.new
  end

  def call(args)
    raise "This command takes no arguments" unless args.empty?
    problem_techs = @db.technology.values.select{|t| t.leads_to != [] and !t.start_year and t.leads_to.any?{|t2| @db.technology[t2].start_year} }
    puts problem_techs.map(&:name)
  end
end

VerifyTechnologyYears.new.call(ARGV)
